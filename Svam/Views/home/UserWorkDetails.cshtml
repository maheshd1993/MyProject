@{
    ViewBag.Title = "UserWorkDetails";
    Layout = "~/Views/Shared/_LayoutSiteMaster.cshtml";
    var encode = new Svam.UtilityManager.StringCipher();
}
@model Traders.Models.ViewSalesModel

<div class="maincontainer">
    <div class="col-sm-12 ">
        <div class="form-horizontal">
            @using (Html.BeginForm("UserWorkDetails", "home", FormMethod.Post))
            {
                <div class="row">
                    <div class="col-sm-12">
                        <div class="panel panel-info">
                            <div class="panel-heading"><strong>Work Detail</strong>   <span style="margin-left: 12%; color: #c9302c;">@TempData["alert"]</span></div>
                            <div class="panel-body body_pnl">
                                <div class="col-sm-12" style="padding: 3px 0px 11px 0px">
                                    <label class="control-label col-sm-2">From Date:</label>
                                    <div class="col-sm-2">
                                        <input type="text" translate="no" class="form-control "  name="FromDate" id="FromDate" autocomplete="off" data-date-format="@Session["DpDateFormat"]"  placeholder="From Date" value="@Convert.ToString(Session["VLFltrFrmDt"])" readonly />
                                    </div>
                                    <label class="control-label col-sm-2">To Date:</label>
                                    <div class="col-sm-2">
                                        <input type="text" translate="no" class="form-control " name="ToDate" id="ToDate" autocomplete="off"  data-date-format="@Session["DpDateFormat"]" placeholder="To Date" value="@Convert.ToString(Session["VLFltrToDt"])" readonly />
                                    </div>
                                    <div class="col-sm-2 padd0">
                                        <input id="Submit1" class="btn btn-success" style="margin-left: 10px;" type="submit" value="Filter" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-10" style="padding-right:0">
                        <table class="table table-bordered tablefont">
                            <thead class="black-white-text">
                                <tr>
                                    <th>#</th>
                                    <th>User Name</th>
                                    <th>Total Count</th>
                                    <th>Past Performance</th>
                                    @*<th>Past Per Count</th>*@
                                </tr>
                            </thead>
                            <tbody>
                                @{int i = 1;}
                                @if (Model.userworklist.Count > 0)
                                {
                                    foreach (var item in Model.userworklist.OrderByDescending(em => em.Id))
                                    {
                                        <tr>
                                            <td translate="no">@i</td>
                                            <td translate="no">@item.userName</td> 
                                            <td data-column="Modified Date"><a href="#" class="showDetails" data-toggle="modal" data-name="Missed" data-target="#ModifiedDate" leadstaus="@item.LeadStatus" userId="@item.Id" onclick="ModifiedDate(this);" translate="no">@item.ModifiedDate</a></td>
                                            @*@if (item.Id == 2946)
                                            {
                                            <td data-column="Modified Date"><a href="#" class="showDetails" data-toggle="modal" data-name="Missed" data-target="#ModifiedDate" leadstaus="@item.LeadStatus" userId="@item.Id" onclick="ModifiedDate(this);" translate="no">332</a></td>
                                            }
                                            @if (item.Id == 2945)
                                            {
                                                <td data-column="Modified Date"><a href="#" class="showDetails" data-toggle="modal" data-name="Missed" data-target="#ModifiedDate" leadstaus="@item.LeadStatus" userId="@item.Id" onclick="ModifiedDate(this);" translate="no">661</a></td>
                                            }
                                            @if (item.Id == 2648)
                                            {
                                                <td data-column="Modified Date"><a href="#" class="showDetails" data-toggle="modal" data-name="Missed" data-target="#ModifiedDate" leadstaus="@item.LeadStatus" userId="@item.Id" onclick="ModifiedDate(this);" translate="no">895</a></td>
                                            }
                                            @if (item.Id == 2644)
                                            {
                                                <td data-column="Modified Date"><a href="#" class="showDetails" data-toggle="modal" data-name="Missed" data-target="#ModifiedDate" leadstaus="@item.LeadStatus" userId="@item.Id" onclick="ModifiedDate(this);" translate="no">476</a></td>
                                            }
                                            @if (item.Id == 2606)
                                            {
                                                <td data-column="Modified Date"><a href="#" class="showDetails" data-toggle="modal" data-name="Missed" data-target="#ModifiedDate" leadstaus="@item.LeadStatus" userId="@item.Id" onclick="ModifiedDate(this);" translate="no">417</a></td>
                                            }
                                            @if (item.Id == 2368)
                                            {
                                                <td data-column="Modified Date"><a href="#" class="showDetails" data-toggle="modal" data-name="Missed" data-target="#ModifiedDate" leadstaus="@item.LeadStatus" userId="@item.Id" onclick="ModifiedDate(this);" translate="no">812</a></td>
                                            }
                                            @if (item.Id == 2203)
                                            {
                                                <td data-column="Modified Date"><a href="#" class="showDetails" data-toggle="modal" data-name="Missed" data-target="#ModifiedDate" leadstaus="@item.LeadStatus" userId="@item.Id" onclick="ModifiedDate(this);" translate="no">1253</a></td>
                                            }
                                            @if (item.Id == 2194)
                                            {
                                                <td data-column="Modified Date"><a href="#" class="showDetails" data-toggle="modal" data-name="Missed" data-target="#ModifiedDate" leadstaus="@item.LeadStatus" userId="@item.Id" onclick="ModifiedDate(this);" translate="no">598</a></td>
                                            }
                                            @if (item.Id == 2193)
                                            {
                                                <td data-column="Modified Date"><a href="#" class="showDetails" data-toggle="modal" data-name="Missed" data-target="#ModifiedDate" leadstaus="@item.LeadStatus" userId="@item.Id" onclick="ModifiedDate(this);" translate="no">697</a></td>
                                            }
                                            @if (item.Id == 2192)
                                            {
                                                <td data-column="Modified Date"><a href="#" class="showDetails" data-toggle="modal" data-name="Missed" data-target="#ModifiedDate" leadstaus="@item.LeadStatus" userId="@item.Id" onclick="ModifiedDate(this);" translate="no">869</a></td>
                                            }
                                            @if (item.Id == 2183)
                                            {
                                                <td data-column="Modified Date"><a href="#" class="showDetails" data-toggle="modal" data-name="Missed" data-target="#ModifiedDate" leadstaus="@item.LeadStatus" userId="@item.Id" onclick="ModifiedDate(this);" translate="no">731</a></td>
                                            }
                                            @if (item.Id == 2155)
                                            {
                                                <td data-column="Modified Date"><a href="#" class="showDetails" data-toggle="modal" data-name="Missed" data-target="#ModifiedDate" leadstaus="@item.LeadStatus" userId="@item.Id" onclick="ModifiedDate(this);" translate="no">764</a></td>
                                            }*@
                                            <td translate="no">@item.PastPerformance</td>
                                            @*<td data-column="Modified Date"><a href="#" class="showDetails" data-toggle="modal" data-name="Missed" data-target="#ClosedLeadStatus" userId="@item.Id" translate="no">0</a></td>*@
                                        </tr>
                                        i++;
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                    <div class="col-sm-2" style="padding-left:0">
                        <table class="table table-bordered tablefont">
                            <thead class="black-white-text">
                                <tr>
                                    <th>Past Per Count</th>
                                </tr>


                            </thead>
                            <tbody>
                                @{int j = 1;}
                                @if (Model.userworkclosedlist.Count > 0)
                                {
                                    foreach (var item in Model.userworkclosedlist.OrderByDescending(em => em.Id))
                                    {
                                        <tr>
                                            <td data-column="Modified Date"><a href="#" class="showDetails" data-toggle="modal" data-name="Closed" data-target="#ModifiedDate" leadstaus="@item.LeadStatus" userId="@item.Id" onclick="closedwlead(this);" translate="no">@item.closedlead</a></td>
                                        </tr>
                                        j++;
                                    }
                                }
                            </tbody>
                        </table>
                        <div class="container paginationcustom">
                            @*<ul class="pagination">
                                    @{int pages = Convert.ToInt32(ViewData["NoOfPages"]);}
                                    @{int url = Convert.ToInt32(Request.QueryString["page"]);}
                                    @{string pageUrl = Convert.ToString(ViewData["url"]);}
                                    @if (pages != 0 && pages != 1)
                                    {
                                        for (int index = 1; index <= pages; index++)
                                        {
                                            string path = pageUrl + index;
                                            if (url == 0)
                                            {
                                                url = 1;
                                            }
                                            <li class="@(index == url ? "active" : "")"><a href="/home/viewsales/?page=@index">@index</a></li>
                                        }
                                    }
                                </ul>*@
                        </div>

                    </div>
                </div>
                                    }
        </div>
    </div>
</div>
<div id="ModifiedDate" class="modal fade" role="dialog"></div>
<script src="/js/jquery-1.11.3.min.js"></script>

<!--bootstap timepicker library-->
<link href="~/timepicker/bootstrap-timepicker.min.css" rel="stylesheet">
<script src="~/timepicker/bootstrap-timepicker.js"></script>



<script>
    var dateFormat = '@Session["DpDateFormat"]';
    $(function () {
        $('#FromDate').datepicker({
            dateFormat: 'dd/MM/yyyy',
            autoclose: true,
            format: dateFormat,
            validateOnBlur: false,
            forceParse: true,
            assumeNearbyYear: 20
        });

        $('#ToDate').datepicker({
            dateFormat: 'dd/MM/yyyy',
            autoclose: true,
            format: dateFormat,
            validateOnBlur: false,
            forceParse: true,
            assumeNearbyYear: 20
        });
    });
</script>
<script>
    //function ModifiedDate(obj) {
    //    debugger;
    //    var self = $(obj);
    //    var LeadId = self.attr('userId');
    //    var leadstatus = self.attr('leadstaus');
    //    jQuery.post('/home/Customerworkdetails', { UserddlName: LeadId, LeadStatus: leadstatus }, function (data) {
    //        jQuery('#ModifiedDate').html(data);
    //        jQuery('#ModifiedDate').modal('show');
    //    });
    //};
    function ModifiedDate(obj) {
        debugger;
        var self = $(obj);
        var LeadId = self.attr('userId');
        var leadstatus = self.attr('leadstaus');
        var leadfromdate = $("#FromDate").val();
        var leadtodate = $("#ToDate").val();
        jQuery.post('/home/Customerworkdetails', { UserddlName: LeadId, LeadStatus: leadstatus, Leadfromdate: leadfromdate, Leadtodate: leadtodate }, function (data) {
            jQuery('#ModifiedDate').html(data);
            jQuery('#ModifiedDate').modal('show');
        });
    };

    function closedwlead(obj) {
        debugger;
        var self = $(obj);
        var LeadId = self.attr('userId');
        var leadstatus = self.attr('leadstaus');
        var leadfromdate = $("#FromDate").val();
        var leadtodate = $("#ToDate").val();
        jQuery.post('/home/Customerworkdetails', { UserddlName: LeadId, LeadStatus: leadstatus, Leadfromdate: leadfromdate, Leadtodate: leadtodate }, function (data) {
            jQuery('#ModifiedDate').html(data);
            jQuery('#ModifiedDate').modal('show');
        });
    };

</script>